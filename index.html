<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Remove Photo Backgrounds ‚Äì Upload Multiple Images</title>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <!-- Local CSS -->
  <link rel="stylesheet" href="static/styles.css">

  <!-- ONNX Runtime Web -->
  <script src="https://cdn.jsdelivr.net/npm/onnxruntime-web/dist/ort.min.js"></script>
  <!-- JSZip for ZIP downloads -->
  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>

  <style>
    .logo-wrapper {
      position: absolute;
      top: 10px;
      left: 10px;
      z-index: 1000;
    }
    .site-logo {
      width: 130px;
      max-width: 40vw;
    }

    /* ZIP download button */
    .zip-download-btn {
      display: none;
      margin: 20px auto 0 auto;
      padding: 12px 25px;
      border-radius: 25px;
      background: #FFD700;
      color: #000;
      font-weight: bold;
      text-align: center;
      cursor: pointer;
      transition: transform 0.3s;
      text-decoration: none;
    }
    .zip-download-btn:hover {
      transform: scale(1.1);
    }

    /* Preview boxes */
    #previewArea {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin-top: 20px;
    }
    .preview-box {
      display: inline-block;
      border-radius: 10px;
      overflow: hidden;
      width: 150px;
      height: 150px;
      background: rgba(255,255,255,0.05);
      position: relative;
    }
    .preview-box canvas {
      width: 100%;
      height: 100%;
      object-fit: contain;
      transition: transform 0.3s, opacity 0.5s;
    }
    .preview-box canvas:hover {
      transform: scale(1.05);
    }
  </style>
</head>

<body>
<div class="logo-wrapper">
  <img src="static/bgremovalhub.png" class="site-logo" alt="Logo">
</div>

<div class="main-wrapper">
  <div class="card-box">
  <style>
  .title {
    font-size: 2em;          /* MAIN heading bigger */
    font-weight: 700;
    color: #FFD700;
    line-height: 1.15;
    text-align: center;
    margin-bottom: 5;
  }

</style>

<h1 class="title">
  Free Image Background Remover<br>
  Upload Multiple Images
</h1>

    <p class="subtext">High-quality AI background removal ‚Äî upload up to <strong>50 images</strong>.</p>
    <p class="subtext" style="color:#FFD700;">‚ú® For fast processing, select 10 to 20 images.</p>

   <div id="dropZone" class="upload-box">
  <p>üìÅ Drag & Drop images here<br>or click to browse</p>
  <input type="file" id="fileInput" multiple accept="image/*" hidden>
</div>



    <p id="fileCount" class="file-count">No files selected</p>

    <div class="form-check color-toggle" style="display:flex; justify-content:center; align-items:center; margin-top:15px;">
      <label class="form-check-label" for="enableColor" style="font-size:16px; font-weight:600;">
        Add background color or photo
      </label>
      <input class="form-check-input" type="checkbox" id="enableColor" style="margin-left:8px; margin-top:0; transform:scale(1.3); cursor:pointer;">
    </div>

    <div id="bgModeButtons" style="display:none; margin-top:10px; gap:8px; justify-content:center;">
      <button id="btnBackground" type="button"
        style="padding:8px 14px; border-radius:8px; border:1px solid #ccc; background:white; cursor:pointer;">
        Background
      </button>
      <button id="btnColor" type="button"
        style="padding:8px 14px; border-radius:8px; border:1px solid #006aff; background:#006aff; color:white; cursor:pointer;">
        Color
      </button>
    </div>

  <!-- Background color picker -->
<input type="color"
       id="bgColor"
       value="#FFFFFF"
       class="form-control"
       style="display: none; margin: 10px auto 0; width: 70px; padding: 6px;">

<!-- Background image selector -->
<input type="file"
       id="bgPhoto"
       accept="image/*"
       class="form-control"
       style="display: none; margin: 10px auto 0;">

<!-- Process button -->
<button id="processBtn"
        class="btn process-btn"
        style="margin-top:12px; background-color:#FFD700; color:#000; border:none;">
    üöÄ Remove Background
</button>

    <div class="progress mt-4" style="display:none;">
      <div id="progressBar" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar">0%</div>
    </div>

    <!-- Single preview area -->
    <div id="previewArea"></div>

    <a id="zipDownloadBtn" class="zip-download-btn">‚¨áÔ∏è Download All Images</a>

    <div id="status" class="status-text"></div>
  </div>
</div>

<footer style="text-align:center;margin-top:20px;font-size:14px;color:#fff;">
  Any queries or suggestions? Mail me:
  <a href="mailto:bhuttahafizfarooq@gmail.com" style="color:#fff;">
    bhuttahafizfarooq@gmail.com
  </a><br>
  Developed by Hafiz Farooq
</footer>

<!-- Local JS -->
<script src="bg-remove.js"></script>

<!-- Drag & Drop + Background toggle logic -->
<script>
const dropZone = document.getElementById('dropZone');
const fileInput = document.getElementById('fileInput');
const fileCount = document.getElementById('fileCount');
const enableColor = document.getElementById('enableColor');
const bgModeButtons = document.getElementById('bgModeButtons');
const btnBackground = document.getElementById('btnBackground');
const btnColor = document.getElementById('btnColor');
const bgColor = document.getElementById('bgColor');
const bgPhoto = document.getElementById('bgPhoto');

let files = [];
let activeBgMode = null;

dropZone.onclick = () => fileInput.click();
dropZone.ondragover = e => { e.preventDefault(); dropZone.classList.add('dragover'); };
dropZone.ondragleave = () => dropZone.classList.remove('dragover');
dropZone.ondrop = e => {
  e.preventDefault();
  dropZone.classList.remove('dragover');
  files = Array.from(e.dataTransfer.files);
  fileCount.textContent = `${files.length} file(s) selected`;
};

fileInput.onchange = e => {
  files = Array.from(e.target.files);
  fileCount.textContent = `${files.length} file(s) selected`;
};

// Background toggle
enableColor.onchange = () => {
  if (enableColor.checked) {
    bgModeButtons.style.display = "flex";
    if (!activeBgMode) setMode('color');
    else setMode(activeBgMode);
  } else {
    bgModeButtons.style.display = "none";
    bgColor.style.display = "none";
    bgPhoto.style.display = "none";
    activeBgMode = null;
    resetModeButtons();
  }
};

btnBackground.onclick = () => setMode('photo');
btnColor.onclick = () => setMode('color');

function resetModeButtons() {
  btnBackground.style.background = 'white';
  btnBackground.style.color = 'black';
  btnBackground.style.border = '1px solid #ccc';
  btnColor.style.background = '#006aff';
  btnColor.style.color = 'white';
  btnColor.style.border = '1px solid #006aff';
}

function setMode(mode) {
  activeBgMode = mode;
  if (mode === 'photo') {
    btnBackground.style.background = '#006aff';
    btnBackground.style.color = 'white';
    btnBackground.style.border = '1px solid #006aff';
    btnColor.style.background = 'white';
    btnColor.style.color = 'black';
    btnColor.style.border = '1px solid #ccc';
    bgPhoto.style.display = 'block';
    bgColor.style.display = 'none';
  } else if (mode === 'color') {
    btnColor.style.background = '#006aff';
    btnColor.style.color = 'white';
    btnColor.style.border = '1px solid #006aff';
    btnBackground.style.background = 'white';
    btnBackground.style.color = 'black';
    btnBackground.style.border = '1px solid #ccc';
    bgColor.style.display = 'block';
    bgPhoto.style.display = 'none';
  }
}

resetModeButtons();
</script>
</body>
</html>
